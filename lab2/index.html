<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lab 2 – Secure User Profile (Demo)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="container">
    <h1>Secure User Profile(Lab2)</h1>
    <nav>
      <button id="nav-auth">Auth</button>
      <button id="nav-profile">Profile</button>
      <button id="nav-sqli">SQLi Demo</button>
    </nav>
  </header>

  <main class="container">
    <!-- AUTH SECTION -->
    <section id="auth-section">
      <div class="card two-col">
        <div>
          <h2>Register</h2>
          <form id="registerForm">
            <label>ชื่อ
              <input name="name" type="text" />
            </label>
            <label>Email
              <input name="email" type="email" required />
            </label>
            <label>Password
              <input name="password" type="password" required />
            </label>
            <button type="submit">สมัคร</button>
          </form>
        </div>

        <div>
          <h2>Login</h2>
          <form id="loginForm">
            <label>Email
              <input name="email" type="email" required />
            </label>
            <label>Password
              <input name="password" type="password" required />
            </label>
            <button type="submit">ล็อกอิน</button>
          </form>
        </div>
      </div>
      <p class="muted">* ในแลบนี้ 2 จะทำในฝั่งหน้าเว็บเพื่อสาธิตหลักการ</p>
    </section>

    <!-- PROFILE SECTION -->
    <section id="profile-section" hidden>
      <div class="card">
        <h2>My Profile</h2>
        <div id="profileView" class="mono"></div>
        <div class="row">
          <button id="logoutBtn">Logout</button>
          <input id="spoofId" placeholder="ลองพิมพ์ id คนอื่นเพื่อทดสอบ IDOR เช่น 999" />
          <button id="goOtherId">ไปหน้าโปรไฟล์ด้วย id นี้</button>
        </div>
        <p class="muted">
          * IDOR Fix: ถ้า id ใน URL ไม่ตรงกับผู้ใช้ที่ล็อกอิน → หน้านี้ต้องขึ้น “Access Denied”
        </p>
      </div>
    </section>

    <!-- SQLi DEMO SECTION -->
    <section id="sqli-section" hidden>
      <div class="card">
        <h2>SQL Injection Demo (จำลอง)</h2>
        <div class="two-col">
          <div>
            <h3>ลองใส่</h3>
            <p class="muted">เช่น: username: <code>admin' OR '1'='1</code> , password: อะไรก็ได้</p>
            <label>Username <input id="demoUser" /></label>
            <label>Password <input id="demoPass" type="password" /></label>
            <div class="row">
              <button id="btnInsecure">ลองแบบไม่ปลอดภัย</button>
              <button id="btnSecure">ลองแบบปลอดภัย</button>
            </div>
          </div>
          <div>
            <h3>ผลลัพธ์</h3>
            <pre id="demoOut" class="mono"></pre>
          </div>
        </div>

        <details>
          <summary>(จำลอง)</summary>
<pre class="mono small">
❌ Vulnerable:
SELECT * FROM users
WHERE username = '<span>username</span>'
  AND password = '<span>password</span>';

✅ Secure (Parameterized):
SELECT * FROM users
WHERE username = ?
  AND password = ?;
</pre>
        </details>
      </div>
    </section>
  </main>

  <footer class="container muted">
    <small>LAB2</small>
  </footer>

  <script src="script.js"></script>
</body>
</html>
